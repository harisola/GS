    </div>
    <!-- All Complete and Close -->
  </div>
  <!--/MainWrapper--> 
</div>
<!--/Smooth Scroll--> 
<!--Modals--> 
 


<!-- Add a new Process -->
<div class="modal fade" data-easein="fadeInLeft" data-easeout="fadeOutLeft" role="dialog" aria-hidden="false" id="add_new_process_modal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Add a new process</h4></div>
      <div id="modal-body" class="modal-body text-center">
      </div>                                       
                      
            
      <div class="modal-footer">
        <button id="create_new_process" type="submit" class="btn btn-warning btn-lg" style="float: right;">Save</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" style="float: left">Close</button>
      </div>
    </div>
    <!-- /.modal-content --> 
  </div>
  <!-- /.modal-dialog --> 
</div>
<!-- /.modal --> 



<!-- Add a new Process -->
<div class="modal fade" data-easein="fadeInLeft" data-easeout="fadeOutLeft" role="dialog" aria-hidden="false" id="add_new_procedure_modal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Add a new procedure</h4></div>
      <div id="modal-body" class="modal-body text-center">
      </div>                                       
                      
            
      <div class="modal-footer">
        <button id="create_new_procedure" type="submit" class="btn btn-warning btn-lg" style="float: right;">Save</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" style="float: left">Close</button>
      </div>
    </div>
    <!-- /.modal-content --> 
  </div>
  <!-- /.modal-dialog --> 
</div>
<!-- /.modal --> 




<!-- Add a new Process -->
<div class="modal fade" data-easein="fadeInLeft" data-easeout="fadeOutLeft" role="dialog" aria-hidden="false" id="add_new_task_modal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Add a new task</h4></div>
      <div id="modal-body" class="modal-body text-center">
      </div>                                       
                      
            
      <div class="modal-footer">
        <button id="create_new_task" type="submit" class="btn btn-warning btn-lg" style="float: right;">Save</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" style="float: left">Close</button>
      </div>
    </div>
    <!-- /.modal-content --> 
  </div>
  <!-- /.modal-dialog --> 
</div>
<!-- /.modal --> 


<!-- Student Information Modal -->
<div class="modal fade" id="student_information_modal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Family Information</h4></div>
      <div id="modal-body" class="modal-body text-center"></div>                                       
                      
            
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
    <!-- /.modal-content --> 
  </div>
  <!-- /.modal-dialog --> 
</div>
<!-- /.modal --> 


<!--Panel Question Modal-->
<div class="modal fade" id="panel-question">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <i class="fa fa-question"></i> </div>
      <div class="modal-body text-center">How Do you Do?</div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
    <!-- /.modal-content --> 
  </div>
  <!-- /.modal-dialog --> 
</div>
<!-- /.modal --> 

<!--Power Widgets Modal-->
<div class="modal" id="delete-widget">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <i class="fa fa-lock"></i> </div>
      <div class="modal-body text-center">
        <p>Are you sure to delete this widget?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal" id="trigger-deletewidget-reset">Cancel</button>
        <button type="button" class="btn btn-primary" id="trigger-deletewidget">Delete</button>
      </div>
    </div>
    <!-- /.modal-content --> 
  </div>
  <!-- /.modal-dialog --> 
</div>
<!-- /.modal --> 

<!--Sign Out Dialog Modal-->
<div class="modal" id="signout">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <i class="fa fa-lock"></i> </div>
      <div class="modal-body text-center">Are You Sure Want To Log Out?</div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" id="yesigo">Ok</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
    <!-- /.modal-content --> 
  </div>
  <!-- /.modal-dialog --> 
</div>
<!-- /.modal --> 

<!--Lock Screen Dialog Modal-->
<div class="modal" id="lockscreen">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <i class="fa fa-lock"></i> </div>
      <div class="modal-body text-center">Are You Sure Want To Lock Screen?</div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" id="yesilock">Ok</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
    <!-- /.modal-content --> 
  </div>
  <!-- /.modal-dialog --> 
</div>
<!-- /.modal --> 

<!--Scripts--> 

<!--GMaps-->
<!-- 
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
-->

<!--link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script -->


<!--JQuery--> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/jquery/jquery.min.js"></script> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/jquery/jquery-ui.min.js"></script> 

<?php
    if($this->data['can_user_view'] == 1  || $this->data['can_user_add'] ==1 || $this->data['can_user_print'] == 1 || $this->data['can_user_export'] ==1 ||
    $this->data['can_user_edit'] == 1 || $this->data['can_user_delete'] == 1 || $this->data['can_user_approve'] == 1)
{ ?>
<!-- Select 2 -->
<script src="<?php echo base_url()?>components/select2/select2.js" type="text/javascript"></script>
<script type="text/javascript">
  $(document).ready(function() {
    $("#select_position_tags").select2();
  });
</script>
<?php } ?>

<!-- <script>
var highestCol = Math.max($('#element1').height(),$('#element2').height());
$('.elements').height(highestCol);
</script> -->


<!--GMap--> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/gmap/jquery.gmap.js"></script> 

<!--Fullscreen--> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/fullscreen/screenfull.min.js"></script> 

<!--Forms-->
<?php
    if($this->data['can_user_view'] == 1  || $this->data['can_user_add'] ==1 || $this->data['can_user_print'] == 1 || $this->data['can_user_export'] ==1 ||
    $this->data['can_user_edit'] == 1 || $this->data['can_user_delete'] == 1 || $this->data['can_user_approve'] == 1)
{ ?>
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/forms/jquery.form.min.js"></script> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/forms/jquery.validate.min.js"></script> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/forms/jquery.maskedinput.min.js"></script> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/jquery-steps/jquery.steps.min.js"></script> 
<?php } ?>

<!--NanoScroller--> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/nanoscroller/jquery.nanoscroller.min.js"></script> 

<!--Sparkline--> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/sparkline/jquery.sparkline.min.js"></script> 

<!--Horizontal Dropdown--> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/horisontal/cbpHorizontalSlideOutMenu.js"></script> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/classie/classie.js"></script> 

<?php
    if($this->data['can_user_view'] == 1  || $this->data['can_user_add'] ==1 || $this->data['can_user_print'] == 1 || $this->data['can_user_export'] ==1 ||
    $this->data['can_user_edit'] == 1 || $this->data['can_user_delete'] == 1 || $this->data['can_user_approve'] == 1)
{ ?> 
<!--Datatables-->
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/datatables/jquery.dataTables.min.js"></script> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/datatables/jquery.dataTables-bootstrap.js"></script> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/datatables/dataTables.colVis.js"></script> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/datatables/colvis.extras.js"></script> 
<?php } ?>






<!--PowerWidgets--> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/powerwidgets/powerwidgets.js"></script> 

<!--Bootstrap--> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/bootstrap/bootstrap.min.js"></script> 


<!-- Search List Items -->


<!--Bootstrap Hover Dropdown - Uncomment this if you want to open dropdowns on mouse hover
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/bootstrap-hover-dropdown/bootstrap-hover-dropdown.js"></script>

<script>
// Menu hover dropdown effect
$('.dropdown-toggle').dropdownHover().dropdown();
$(document).on('click', '.orbmm .dropdown-menu', function(e) {
    e.stopPropagation()
})

</script>--> 

<?php
    if($this->data['can_user_view'] == 1  || $this->data['can_user_add'] ==1 || $this->data['can_user_print'] == 1 || $this->data['can_user_export'] ==1 ||
    $this->data['can_user_edit'] == 1 || $this->data['can_user_delete'] == 1 || $this->data['can_user_approve'] == 1)
{ ?> 
<!--X-Editable--> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/x-editable/bootstrap-editable.min.js"></script> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/x-editable/demo.js"></script> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/x-editable/demo-mock.js"></script> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/x-editable/select2.js"></script> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/x-editable/address.js"></script> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/x-editable/jquery.mockjax.js"></script> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/x-editable/moment.min.js"></script> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/x-editable/select2-bootstrap.css"></script> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/x-editable/typeahead.js"></script> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/x-editable/typeaheadjs.js"></script>
<script type="text/javascript" src="<?php echo base_url()?>components/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="<?php echo base_url()?>components/js/dataTables.tableTools.min.js"></script>
<?php } ?>

<!--ToDo--> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/todos/todos.js"></script> 

<!--FitVids--> 
<script type="text/javascript" src="<?php echo base_url()?>components/orb/js/vendors/fitvids/jquery.fitvids.js"></script> 

<!--Main App--> 
<script type="text/javascript">
//ORB JavaScript
// DOM Preload
(function ($) {

    "use strict";

    TableTools.BUTTONS.copy_to_div = {
        "sAction": "text",
        "sTag": "default",
        "sFieldBoundary": "",
        "sFieldSeperator": "\t",
        "sNewLine": "<br>",
        "sToolTip": "",
        "sButtonClass": "DTTT_button_text",
        "sButtonClassHover": "DTTT_button_text_hover",
        "sButtonText": "Copy to element",        
        "mColumns": "all",
        "bHeader": true,
        "bFooter": true,
        "sDiv": "",
        "fnMouseover": null,
        "fnMouseout": null,
        "fnClick": function( nButton, oConfig ) {
            document.getElementById(oConfig.sDiv).innerHTML =
                this.fnGetTableData(oConfig);
        },
        "fnSelect": null,
        "fnComplete": null,
        "fnInit": null
    };

    $(document).ready(function () {



        // Preload DOM of Inbox functions:
        inbox();

        // ========================================================================
        //  Togglers
        // ========================================================================

        // toogle sidebar
        $('.left-toggler').click(function (e) {            
            $(".responsive-admin-menu").toggleClass("sidebar-toggle");            
            $(".content-wrapper").toggleClass("main-content-toggle-left");                        
            e.preventDefault();
        });

        // toogle sidebar
        $('.right-toggler').click(function (e) {
            $(".main-wrap").toggleClass("userbar-toggle");
            e.preventDefault();
        });

        // toogle chatbar
        $('.chat-toggler').click(function (e) {
            $(".chat-users-menu").toggleClass("chatbar-toggle");
            e.preventDefault();
        });

        // Toggle Chevron in Bootstrap Collapsible Panels
        $('.btn-close').click(function (e) {
            e.preventDefault();
            $(this).parent().parent().parent().fadeOut();
        });

        $('.btn-minmax').click(function (e) {
            e.preventDefault();
            var $target = $(this).parent().parent().next('.panel-body');
            if ($target.is(':visible')) $('i', $(this)).removeClass('fa fa-chevron-circle-up').addClass('fa fa-chevron-circle-down');
            else $('i', $(this)).removeClass('fa-chevron-circle-down').addClass('fa fa-chevron-circle-up');
            $target.slideToggle();
        });
        $('.btn-question').click(function (e) {
            e.preventDefault();
            $('#myModal').modal('show');
        });

        if ($('#megamenuCarousel').length) {
            $('#megamenuCarousel').carousel()
        }




        // ========================================================================
        //  JQuery FitVids Init (js\vendors\fitvids)
        // ========================================================================

        if ($('.vidz').length) {
            $(".vidz").fitVids();
        }
        

        // ========================================================================
        //  Powerwidgets (js\vendors\powerwidgets)
        // ========================================================================

        if ($('#powerwidgets').length) {
            $('#powerwidgets').powerWidgets({
                grid: '.bootstrap-grid',
                widgets: '.powerwidget',
                localStorage: true,
                deleteSettingsKey: '#deletesettingskey-options',
                settingsKeyLabel: 'Reset settings?',
                deletePositionKey: '#deletepositionkey-options',
                positionKeyLabel: 'Reset position?',
                sortable: true,
                buttonsHidden: false,
                toggleButton: true,
                toggleClass: 'fa fa-chevron-circle-up | fa fa-chevron-circle-down',
                toggleSpeed: 200,
                onToggle: function () {},
                deleteButton: true,
                deleteClass: 'fa fa-times-circle',
                onDelete: function (widget) {
                    $('#delete-widget').modal(); // shows the modal
                    $(widget).addClass('deletethiswidget'); // ads an indicator class which we will use to find the widget
                },
                editButton: true,
                editPlaceholder: '.powerwidget-editbox',
                editClass: 'fa fa-cog | fa fa-cog',
                editSpeed: 200,
                onEdit: function () {},
                fullscreenButton: true,
                fullscreenClass: 'fa fa-arrows-alt | fa fa-arrows-alt',
                fullscreenDiff: 3,
                onFullscreen: function () {},
                buttonOrder: '%refresh% %delete% %edit% %fullscreen% %toggle%',
                opacity: 1.0,
                dragHandle: '> header',
                placeholderClass: 'powerwidget-placeholder',
                indicator: true,
                indicatorTime: 600,
                ajax: true,
                timestampPlaceholder: '.powerwidget-timestamp',
                timestampFormat: 'Last update: %m%/%d%/%y% %h%:%i%:%s%',
                refreshButton: true,
                refreshButtonClass: 'fa fa-refresh',
                labelError: 'Sorry but there was a error:',
                labelUpdated: 'Last Update:',
                labelRefresh: 'Refresh',
                labelDelete: 'Delete widget:',
                afterLoad: function () {},
                rtl: false,
                onChange: function () {},
                onSave: function () {}
            });
        }

        // Custom way to delete widgets.
        $('#trigger-deletewidget').click(function (e) {
            $('.deletethiswidget').remove(); // delete widget
            $('#delete-widget').modal('hide'); // close the modal
        });
        $('#trigger-deletewidget-reset').click(function (e) {
            $('body').find('.deletethiswidget').removeClass('deletethiswidget'); // cancel so remove indicator class
        });


        // Empty all local storage. (demo not needed)
        $('.empty-local-storage').click(function (e) {
            var $m = $('#confirm_replacer');
            if ($m.length && typeof $.fn.modal === 'function') {
                $('#bootconfirm_confirm', $m).off(clickEvent).on(clickEvent, function (e) {
                    localStorage.clear();
                    location.reload();
                    $m.modal().hide();
                });
                $('.modal-title', $m).text("Clear all localStorage");
                $m.modal();
            } else {
                var cls = confirm("Clear all localStorage?");
                if (cls && localStorage) {
                    localStorage.clear();
                    location.reload();
                }
            }
            e.preventDefault();
        });
        

        // ========================================================================
        //  Bootstrap Tooltips and Popovers
        // ========================================================================

        if ($('.tooltiped').length) {
            $('.tooltiped').tooltip();
        }

        if ($('.tooltiped').length) {
            $('.popovered').popover({
                'html': 'true'
            });
        }


        // Making Bootstrap Popover Hovered


        if ($('.popover-hovered').length) {
            $('.popover-hovered').popover({
                trigger: 'hover',
                'html': 'true',
                'placement': 'top'
            });
        }

        // ========================================================================
        //  Progress Bars
        // ========================================================================

        if ($('.v-default-animated .progress-bar').length) {
            $('.v-default-animated .progress-bar').progressbar();
        }

        if ($('.h-default-basic .progress-bar').length) {
            $('.h-default-basic .progress-bar').progressbar({
                display_text: 'fill',
                use_percentage: false
            });
        }
        if ($('.v-bottom-animated .progress-bar').length) {
            $('.v-bottom-animated .progress-bar').progressbar({
                display_text: 'fill'
            });
        }

        // ========================================================================
        //  Full screen Toggle
        // ========================================================================

        $('#toggle-fullscreen').click(function () {
            screenfull.request();
        });


        // ========================================================================
        //  Keep open Bootstrap Dropdown on click
        // ========================================================================

        $('.keep_open').click(function (event) {
            event.stopPropagation();
        });


        // ========================================================================
        //  Nanoscroller
        // ========================================================================

        if ($('.nano').length) {
            $(".nano").nanoScroller();
        }


        // ========================================================================
        //  Inbox Page
        // ========================================================================

        function inbox() {

            // check all checkboxes in table
            $('.checkall').click(function () {

                var $parentTable = $(this).parents('table');
                var $checkboxes = $parentTable.find('.checkbox');
                var isChecked = $(this).is(':checked');


                $checkboxes.prop('checked', isChecked).parent().toggleClass('checked', isChecked);
                $parentTable.find('tbody tr').toggleClass('selected', isChecked);

            });

            // star
            $('.mailinbox .fa-flag').click(function () {
                var isStarred = $(this).is('.flagged-yellow');
                $(this).toggleClass('flagged-yellow', !isStarred).toggleClass('flagged-grey', isStarred);
            });

            //add class selected to table row when checked
            $('.mailinbox tbody input:checkbox').click(function () {
                $(this).parents('tr').toggleClass('selected', $(this).prop('checked'));
            });

            // trash
            $('.delete').click(function (e) {
                e.preventDefault();

                var $checked = $('.mailinbox .checkbox:checked');
                var toDelete = $checked.length;

                if (toDelete === 0) {
                    showAlert('No selected message');
                    return;
                }

                $checked.parents('tr').remove();

                var msg = $checked.length > 1 ? 'messages' : 'message';
                var info = $checked.length + ' ' + msg + ' deleted';
                showAlert(info);
            });

            // mark as read/unread
            $('.mark_read, .mark_unread').click(function (e) {
                e.preventDefault();

                var $checked = $('.mailinbox .checkbox:checked');
                var toMark = $checked.length;

                if (toMark === 0) {
                    showAlert('No selected message');
                    return;
                }

                $checked.parents('tr').toggleClass('unread', !$(this).is('.mark_read'));

                var msg = $checked.length > 1 ? 'messages were' : 'message was';
                var state = $(this).is('.mark_read') ? ' read' : ' unread';
                var info = $checked.length + ' ' + msg + ' marked as ' + state;
                showAlert(info);
            });

            // Refresh stub
            $('.refresh').click(function (e) {
                e.preventDefault();
                showLoader();
            });

            // bootstrap alert div
            var $alertDiv = $('<div class="alert alert-danger alert-inbox">')
                .css({
                    display: 'none',
                    position: 'absolute',
                    top: '40%'
                })
                .appendTo('.table-relative');

            // show alert
            function showAlert(message) {
                var w = $alertDiv.text(message).width();
                $alertDiv.show();
                var left = ($alertDiv.parent().width() - w) / 2;
                $alertDiv.css('left', left);
                setTimeout(function () {
                    $alertDiv.fadeOut();
                }, 1000);
            }

            // ajax loader div
            var $loader = $('<div class="loader-darkener">').appendTo('.table-relative');
            $('<div class="fa-spin dummy-loader">').appendTo($loader);

            // show ajax loader
            function showLoader() {
                $loader.show();
                setTimeout(function () {
                    $loader.hide();
                }, 1000);
            }
        }
       

        // ========================================================================
        //  Left Responsive Menu
        // ========================================================================   

        $(document).ready(function () {

            // Responsive Menu//
            $(".responsive-menu").click(function () {
                $(".responsive-admin-menu #menu").slideToggle();
            });
            $(window).resize(function () {
                $(".responsive-admin-menu #menu").removeAttr("style");
            });

            (function multiLevelAccordion($root) {

                var $accordions = $('.accordion', $root).add($root);
                $accordions.each(function () {

                    var $this = $(this);
                    var $active = $('> li > a.submenu.active', $this);
                    $active.next('ul').css('display', 'block');
                    $active.addClass('downarrow');
                    var a = $active.attr('data-id') || '';

                    var $links = $this.children('li').children('a.submenu');
                    $links.click(function (e) {
                        if (a !== "") {
                            $("#" + a).prev("a").removeClass("downarrow");
                            $("#" + a).slideUp("fast");
                        }
                        if (a == $(this).attr("data-id")) {
                            $("#" + $(this).attr("data-id")).slideUp("fast");
                            $(this).removeClass("downarrow");
                            a = "";
                        } else {
                            $("#" + $(this).attr("data-id")).slideDown("fast");
                            a = $(this).attr("data-id");
                            $(this).addClass("downarrow");
                        }
                        e.preventDefault();
                    });
                });
            })($('#menu'));




            // Responsive Menu Adding Opened Class//

            $(".responsive-admin-menu #menu li").hover(
                function () {
                    $(this).addClass("opened").siblings("li").removeClass("opened");
                },
                function () {
                    $(this).removeClass("opened");
                }
            );

        });


        // ========================================================================
        //  Forms
        // ========================================================================

        //Masking

        if ($('#date, #date2').length) {
            $("#date, #date2").mask('99/99/9999', {
                placeholder: 'X'
            });
        }

        if ($('#phone').length) {
            $("#phone").mask('(999) 999-9999', {
                placeholder: 'X'
            });
        }

        if ($('#mobilephone').length) {
            $('#mobilephone').mask('0999-9999999', {
                placeholder: 'X'
            });
        }

        if ($('#landline').length) {
            $('#landline').mask('999-9999999', {
                placeholder: 'X'
            });
        }

        if ($('#cnic').length) {
            $('#cnic').mask('99999-9999999-9', {
                placeholder: 'X'
            });
        }

        if ($('#card').length) {
            $("#card").mask('9999-9999-9999-9999', {
                placeholder: 'X'
            });
        }

        if ($('#serial').length) {
            $("#serial").mask('***-***-***-***-***-***', {
                placeholder: '_'
            });
        }
        if ($('#tax').length) {
            $("#tax").mask('99-9999999', {
                placeholder: 'X'
            });
        }
        if ($('#cvv').length) {
            $('#cvv').mask('999', {
                placeholder: 'X'
            });
        }
        if ($('#year').length) {
            $('#year').mask('2099', {
                placeholder: 'X'
            });
        }


        //Datepicker

        // Regular datepicker
        if ($('#date').length) {
            $('#date').datepicker({
                dateFormat: 'dd.mm.yy',
                prevText: '<i class="fa fa-chevron-left"></i>',
                nextText: '<i class="fa fa-chevron-right"></i>'
            });
        }

        // Date range
        if ($('#start').length) {
            $('#start').datepicker({
                dateFormat: 'dd.mm.yy',
                prevText: '<i class="fa fa-chevron-left"></i>',
                nextText: '<i class="fa fa-chevron-right"></i>',
                onSelect: function (selectedDate) {
                    $('#finish').datepicker('option', 'minDate', selectedDate);
                }
            });
        }
        if ($('#finish').length) {
            $('#finish').datepicker({
                dateFormat: 'dd.mm.yy',
                prevText: '<i class="fa fa-chevron-left"></i>',
                nextText: '<i class="fa fa-chevron-right"></i>',
                onSelect: function (selectedDate) {
                    $('#start').datepicker('option', 'maxDate', selectedDate);
                }
            });
        }

        // Inline datepicker
        if ($('#inline').length) {
            $('#inline').datepicker({
                dateFormat: 'dd.mm.yy',
                prevText: '<i class="fa fa-chevron-left"></i>',
                nextText: '<i class="fa fa-chevron-right"></i>'
            });
        }

        // Inline date range
        if ($('#inline-start').length) {
            $('#inline-start').datepicker({
                dateFormat: 'dd.mm.yy',
                prevText: '<i class="fa fa-chevron-left"></i>',
                nextText: '<i class="fa fa-chevron-right"></i>',
                onSelect: function (selectedDate) {
                    $('#inline-finish').datepicker('option', 'minDate', selectedDate);
                }
            });
        }
        if ($('#inline-finish').length) {
            $('#inline-finish').datepicker({
                dateFormat: 'dd.mm.yy',
                prevText: '<i class="fa fa-chevron-left"></i>',
                nextText: '<i class="fa fa-chevron-right"></i>',
                onSelect: function (selectedDate) {
                    $('#inline-start').datepicker('option', 'maxDate', selectedDate);
                }
            });
        }             


        // ========================================================================
        //  Horisontal Menu (js\vendors\horisontal)
        // ========================================================================

        var menu = new cbpHorizontalSlideOutMenu(document.getElementById('cbp-hsmenu-wrapper'));

        // ========================================================================
        //  Summernote (js\vendors\summernote)
        // ========================================================================

        if ($('#summernote').length) {
            $('#summernote').summernote({
                height: 100,
                focus: false
            });            
        }        


        // ========================================================================
        //  User View Switch (Users List4 Page)
        // ========================================================================
        function init() {
            optionSwitch.forEach(function (el, i) {
                el.addEventListener('click', function (ev) {
                    ev.preventDefault();
                    _switch(this);
                }, false);
            });
        }

        function _switch(opt) {
            // remove other view classes and any any selected option
            optionSwitch.forEach(function (el) {
                classie.remove(container, el.getAttribute('data-view'));
                classie.remove(el, 'items-selected');
            });
            // add the view class for this option
            classie.add(container, opt.getAttribute('data-view'));
            // this option stays selected
            classie.add(opt, 'items-selected');
        }


        if (document.getElementById('items')) {
            var container, optionSwitch;
            container = document.getElementById('items');
            optionSwitch = Array.prototype.slice.call(container.querySelectorAll('div.items-options > a'));
            init();
        }


        // ========================================================================
        //  Inbox
        // ========================================================================

        // check all checkboxes in table
        $('.checkall').click(function () {

            var $parentTable = $(this).parents('table');
            var $checkboxes = $parentTable.find('.checkbox');
            var isChecked = $(this).is(':checked');

            $checkboxes.prop('checked',
                isChecked).parent().toggleClass('checked', isChecked);
            $parentTable.find('tbody tr').toggleClass('selected', isChecked);

        });

        // star
        $('.fa-star').click(function () {
            var isStarred = $(this).is('.star-yellow');
            $(this).toggleClass('star-yellow', !isStarred).toggleClass('star-grey', isStarred);
        });

        //add class selected to table row when checked
        $('.mailinbox tbody input:checkbox').click(function () {
            $(this).parents('tr').toggleClass('selected', $(this).prop('checked'));
        });

        // trash
        $('.delete').click(function (e) {
            e.preventDefault();

            var $checked = $('.mailinbox .checkbox:checked');
            var toDelete = $checked.length;

            if (toDelete === 0) {
                showAlert('No selected message');
                return;
            }

            $checked.parents('tr').remove();

            var msg = $checked.length > 1 ? 'messages' : 'message';
            var info = $checked.length + ' ' + msg + ' deleted';
            showAlert(info);
        });

        // mark as read/unread
        $('.mark_read, .mark_unread').click(function (e) {
            e.preventDefault();

            var $checked = $('.mailinbox .checkbox:checked');
            var toMark = $checked.length;

            if (toMark === 0) {
                showAlert('No selected message');
                return;
            }

            $checked.parents('tr').toggleClass('unread', !$(this).is('.mark_read'));

            var msg = $checked.length > 1 ? 'messages were' : 'message was';
            var state = $(this).is('.mark_read') ? ' read' : ' unread';
            var info = $checked.length + ' ' + msg + ' marked as ' + state;
            showAlert(info);
        });

        // Refresh stub
        $('.refresh').click(function (e) {
            e.preventDefault();
            showLoader();
        });

        // bootstrap alert div
        var $alertDiv = $('<div class="alert alert-danger alert-inbox">')
            .css({
                display: 'none',
                position: 'absolute',
                top: '40%'
            })
            .appendTo('.table-ctn');

        // show alert
        function showAlert(message) {
            var w = $alertDiv.text(message).width();
            $alertDiv.show();
            var left = ($alertDiv.parent().width() - w) / 2;
            $alertDiv.css('left', left);
            setTimeout(function () {
                $alertDiv.fadeOut();
            }, 1000);
        }

        // ajax loader div
        var $loader = $('<div class="loader-cnt">').appendTo('.table-ctn');
        $('<div class="fa fa-refresh fa-spin loader">').appendTo($loader);

        // show ajax loader
        function showLoader() {
            $loader.show();
            setTimeout(function () {
                $loader.hide();
            }, 1000);
        }
    });
})(jQuery);
</script> 


<script type="text/javascript">
$('.tags').editable({
    placement: 'right',
    select2: {
        tags: ['cake', 'cookies'],
        tokenSeparators: [",", " "]
    },
});

$('[id^="tags-edit-"]').click(function(e) {
    e.stopPropagation();
    e.preventDefault();
    $('#' + $(this).data('editable') ).editable('toggle');
});
</script>

<script type='text/javascript'>
// ========================================================================
//  Lock Modal
// ======================================================================== 

$(".lockme").click(function (e) {
    e.preventDefault();
    $('#lockscreen').modal();
    $('#yesilock').click(function () {
        window.open('admin-lock.html', '_self');
        $('#lockscreen').modal('hide');
    });

});


// ========================================================================
//  Sign Out Modal
// ========================================================================            

$(".goaway").click(function (e) {
    e.preventDefault();
    $('#signout').modal();
    $('#yesigo').click(function () {
        window.open('<?php echo site_url('logout');?>', '_self');
        $('#signout').modal('hide');
    });

});


$(document).on("click", ".show_student_information", function (e) {

    e.preventDefault();

    var _self = $(this);

    var GR_No = _self.data('id');
    
    $.post('<?php echo base_url() . "index.php/class_list/student_profile_basic_view/";?>?grno='+GR_No, function(data) {
      $('#modal-body').html(data);
    });      


    $("#student_information_modal").modal('show');
});
</script>
<script type="text/javascript" src="<?php echo base_url()?>components/js/anstyle.js"></script>

<script>
$(document).ready(function(){
    $('#selected_grade').change(function(){ //any select change on the dropdown with id selected_grade trigger this code
        $("#selected_section > option").remove(); //first of all clear select items
        var option = $('#selected_grade').val();  // here we are taking option id of the selected one.

        if(option == '#'){
            return false; // return false after clearing sub selected_grade if 'please select was chosen'
        }

        $.ajax({
            type: "POST",
            url: "<?php echo site_url()?>/ajax/class_list_data/getsuboptions_of_grade/"+option, //here we are calling our dropdown controller and getsuboptions method passing the option

            success: function(selected_section) //we're calling the response json array 'selected_section'
            {
                $.each(selected_section,function(id,value) //here we're doing a foeach loop round each sub option with id as the key and value as the value
                {
                    var opt = $('<option />'); // here we're creating a new select option for each suboption
                    opt.val(id);
                    opt.text(value);
                    $('#selected_section').append(opt); //here we will append these new select selected_grade to a dropdown with the id 'selected_section'
                });
            }

        });

    });
});
</script>

<link rel="stylesheet" type="text/css" href="<?php echo base_url()?>components/animate/animations.css">
<script type="text/javascript" src="<?php echo base_url()?>components/animate/css3-animate-it.js"></script>

<!-- <link rel="stylesheet" type="text/css" href="<?php echo base_url()?>components/tablehover/easyTable.css">
<script type="text/javascript" src="<?php echo base_url()?>components/tablehover/easyTable.js"></script> -->
<style type="text/css">
.highlight1 { background-color: #ffff00; }
</style>
<script type="text/javascript">

$(document).ready(function(){
//$('.date3').datepicker();	
//$('.date3').datepicker();		
});	


$(document).on("click focus",".date3",function(){
	$('.date3').datepicker({ dateFormat: 'yy-mm-dd'});
	
/*$('.date3').datepicker({
dateFormat: 'yy-mm-dd',
//minDate: 0,
//maxDate: '+21D',
//beforeShowDay: $.datepicker.noWeekends,
prevText: '<i class="fa fa-chevron-left"></i>',
nextText: '<i class="fa fa-chevron-right"></i>'
}).datepicker( "show" );
*/
});	





function setup_normal(){
    $('#setup_1').attr('class', '');
    $('#setup_1').html('');
    $('#setup_1').addClass('col-md-2 bootstrap-grid sortable-grid ui-sortable');

    $('#setup_2').attr('class', '');
    $('#setup_2').addClass('col-md-8 bootstrap-grid sortable-grid ui-sortable');


    $('#setup_3').attr('class', '');
    $('#setup_3').html('');
    $('#setup_3').addClass('col-md-2 bootstrap-grid sortable-grid ui-sortable');

    $('#setup_4').attr('class', '');
    $('#setup_4').html('');

    $('#setup_process_table td:nth-child(3), #setup_process_table th:nth-child(3)').show();
    $('#setup_process_table td:nth-child(4), #setup_process_table th:nth-child(4)').show();
    $('#setup_procedure_table td:nth-child(4), #setup_procedure_table th:nth-child(4)').show();
}


function setup_2(){
 $('#setup_2').fadeIn(5000);

    $('#setup_5').attr('class', '');
    $('#setup_5').html('');


}
function setup_3(){
  
}
function close_setup_3() { setup_normal(); }
function close_setup_4() {  setup_2(); }

$(document).on("click",".close_setup_4",function(){
	
	var AssID = $("#catIDHidden").val();
	var tableID = $("#catIDHidden").val();
	var sectionID = $("#sectionID").val();
	var detail_id = $("#detailIDHidden").val();
	
	var user_id = $("#user_id").val();
	var role_id = $("#role_id").val();
	var grdID = $("#grdID").val();
	var subjectID = $("#subjectID").val();
	var category = $("#category").val();
	var catType = $("#catType").val();
	var optional = $("#optional").val();
	
	var Ass_in_grade_id = $("#Ass_in_grade_id").val();
	
	var title = $("#title");
	var marks = $("#marks");
	var date3 = $("#date3");
	var description = $("#description");
	
	title.val('');
	marks.val('');
	date3.val('');
	description.val('');
		
	//console.log("optional" + optional);
	/*console.log("tableID"+tableID);
	console.log("sectionID"+sectionID);
	console.log("detail_id"+detail_id);*/
	
	$(".entypo-list-add").each(function(){
		var $rows = $(this).closest(".panel-grey");
		var panel_titles = $rows.find(".panel-body");
		panel_titles.hide();
	});
	
	$('#setup_5').hide();
	$('#setup_2').fadeIn(1000);
	$('#setup_5').html('');
	$('#setup_1').hide();
	
	
	if( tableID == '' ){
		tableID = Ass_in_grade_id;
	}else{
		Ass_in_grade_id = tableID;	
	}

	/*var $row = $("#assCatID_"+AssID).closest(".panel-grey");
		var table = $row.find(".setup_process_table");
		var panelgrey = $row.find(".panel-body");*/
		
		var table =  $("#assCatID_"+AssID);
		var $rows = $(table).closest(".panel-grey");
		var panel_titles = $rows.find(".panel-body");
		panel_titles.show();
		
		$.ajax({ 
			type: "POST",
			url: "<?=site_url().'/ajax/station_process/getDetail';?>",
			cache: false,
			data: { AssInGradeId: Ass_in_grade_id,sectionID:sectionID,role_id: role_id,optional:optional},
			dataType : "HTML",
			success: function( res2 ){
				table.find("tr:gt(0)").remove();
				table.append( res2 );
				$("#setup_5").hide("slow");
				$("#setup_2").show("slow");
			},
		});
				
				
				
});

 //$(document).on('click', '.setup_process_table tr', function () {
 $(document).on('click', '.tdTitle', function () {
	
 //var $row = $(this).closest("tr");
	
	var trID = $(this).closest('tr').attr('data-uid');
	var tableTitle = $(this).closest(".tables").attr('title');
	
	var str = $(this).closest(".tables").attr('id');
	var rs = str.split("_");
	var tableID = rs[1];
	var assID = $('#Ass_in_grade_id2').val();
	var user_id = $('#user_id').val();

	
	$('#setup_2').hide();
	$('#setup_1').show();
	$('#setup_1').html('');
	
	$.ajax({
        type: "POST",
        url: "<?=site_url().'/ajax/station_process/editDetail';?>",
		data: { trID: trID,tableTitle:tableTitle,assID:tableID,user_id:user_id },
		dataType : "HTML",
        success: function( res ){
			//$(".content-wrapper").css( "min-height", "0" );
			//$('#setup_5').show();
			//$('#setup_5').html( res );
			$('#setup_1').html(res);
			//console.log(res);
		},
		complete:function( res ){
			$( 'html, body' ).animate( { scrollTop: 0 }, 0 );
		},
        error: function() { }
    });
	
	
});


$(document).on("click",".entypo-list-add",function(){
	
	$(".entypo-list-add").each(function(){
		var $rows = $(this).closest(".panel-grey");
		var panel_titles = $rows.find(".panel-body");
		panel_titles.hide();
	});
	
	var $row = $(this).closest(".panel-heading");
	var panel_title = $row.find(".panel-title");
	var tableID = $(this).prop("id");
	var title = panel_title.text();
	var user_id = $('#user_id').val();
	var role_id = $('#role_id').val();
	
	$('#setup_2').hide();
	$('#setup_5').html('');
	
	if( user_id > 0 && role_id > 0 ){
		$.ajax({
			type: "POST",
			url: "<?=site_url().'/ajax/station_process/createAssessmentType';?>",
			cache: false,
			data: { process_id: tableID, role_id : role_id, user_id : user_id, title : title },
			dataType : "HTML",
			success: function( res ){
				$(".content-wrapper").css( "min-height", "0" );
				$('#setup_5').show();
				$('#setup_5').html( res );
			},
			//async: false,
			
			
			
		});
	}
});


// Get Form Data database name `subject_grade` table name `assessment_detail`
$(document).on("input",".emarks", function(e){
	
	var marks = $(this).val();
	var txt = marks;
	var obtainMarks2 = '';
	//var eventKeyCode =0;
	
	
	 setTimeout(function(){
		 var eventKeyCode =0;
		 
        eventKeyCode = window.e ? e.keyCode : e.which; // what I already tried is in StackOverflow answer    
        
			}, 100);
		
	
//console.log( marks )

	if( e.eventKeyCode == 8 ){
	}else{
		if ( txt.indexOf(".") > -1 ) {
			var substr = txt.split(".")[1].substring(0, 2);
			$(this).val(txt.split(".")[0] + "." + "5");
		}else{
			obtainMarks2 = marks;
		} 	
	}
	
	
	
   
		
    var self = $(this);
	var flag;
//alert(eventKeyCode);
	
	 flag = false;
	 $(this).val($(this).val().replace(/[^0-9\.]/g,''));
            if ((e.eventKeyCode != 46 || $(this).val().indexOf('.') != -1) && (e.eventKeyCode < 48 || e.eventKeyCode > 57)) {
                e.preventDefault();
	        }else{
			}
			
		

var obtainMarks4 = $(this).val();	
if (!$.isNumeric(obtainMarks4) && (e.eventKeyCode == 9) ) {
    flag = false;  
}else{
	 flag = true;  	
}

if( flag ){
	$(".error").hide();
}else{
	$(".error").show();
}



});
$(document).on( 
	"click",
	"#submitType", 
	function(){
		
		var user_id = $("#user_id").val();
		var role_id = $("#role_id").val();
		var grdID = $("#grdID").val();
		var subjectID = $("#subjectID").val();
		var category = $("#category").val();
		var catType = $("#catType").val();
		var Ass_in_grade_id = $("#Ass_in_grade_id").val();
		var title = $("#title").val();
		var marks = $("#marks").val();
		var date3 = $("#date3").val();
		var description = $("#description").val();
		var tableID = $("#tableID").val();
		var sectionID = $("#sectionID").val();
		
		var $row = $("#"+tableID).closest(".panel-grey");
		var table = $row.find(".setup_process_table");
		var panelgrey = $row.find(".panel-body");
		
		var optional = $("#optional").val();
		
		//alert( date3 );
	if( user_id > 0 && role_id > 0 && grdID > 0 && subjectID > 0 && category > 0 && catType > 0 && Ass_in_grade_id > 0 && title != '' && marks != '' && date3 != ''){
		$.ajax({
				type: "POST",
				url: "<?=site_url().'/ajax/station_process/typeDetail';?>",
				cache: false,
				data: { user_id: user_id, role_id: role_id,grdID:grdID,subjectID:subjectID, category:category, catType:catType,Ass_in_grade_id:Ass_in_grade_id,title:title, marks:marks,date3:date3, description:description,sectionID:sectionID },
				dataType : "text",
				success: function( res ){
				if( res > 0 ){
				$("#dateExceeded").hide();
				$("#title").val('');
				$("#marks").val('');
				$("#date3").val('');
				$("#description").val('');
				
				$.ajax({ 
					type: "POST",
					url: "<?=site_url().'/ajax/station_process/getDetail';?>",
					cache: false,
					data: { AssInGradeId: Ass_in_grade_id,sectionID:sectionID,role_id:role_id,optional:optional },
					dataType : "HTML",
					success: function( res2 ){
						
						table.find("tr:gt(0)").remove();
						table.append( res2 );
						panelgrey.show();
						$("#setup_5").hide("slow");
						$("#setup_2").show("slow");
					},
					
				}); 

					}else{
						$("#dateExceeded").show("slow");
					}
		
				
				
				
				},
				//async: false,
				
				
				
			});
	}
		
	}
);

$(document).on("click","#updateType",function(){

	var detailID = $("#detailIDHidden").val();
	var etitle   = $("#etitle").val();
	var emarks   = $("#emarks").val();
	var edate3   = $("#edate3").val();
	var edes     = $("#edescription").val();
	var AssID     = $("#Ass_in_grade_id2").val();
	var user_id     = $("#user_id").val();
	$.ajax({ 
		type: "POST",
		url: "<?=site_url().'/ajax/station_process/updateDetail';?>",
		cache: false,
		data: { detailID: detailID,etitle:etitle,emarks:emarks,edate3:edate3,edes:edes,AssID:AssID,user_id:user_id },
		dataType : "text",
		success: function( res2 ){
			var re = parseInt(res2);
			if(re > 0 ){
				$(".alert-success").show();
				$("#dateExceeded").hide();
			}else{
				$("#dateExceeded").show();
			}
			/*if(re == 1 ){
				$(".alert-success").show();
				$("#dateExceeded").hide();
			}else if(re == 2){
				
				$("#dateExceeded").show();
			}else{
				$("#dateExceeded").hide();
			} */	
				
		},
	});
});
$(document).on('focus', 'input[type="number"]', function (e) {
  $(this).on('mousewheel.disableScroll', function (e) {
    e.preventDefault()
  })
})
$(document).on("click", ".edit_students", 
	function(){
		var ID = $(this).prop("id");
		var nID = ID.split("_");
		var actualID = parseInt(nID[1]);
		
		var sectionID = $("#sectionID").val();
		var grdID = $("#gradeID").val();
		var optional = $("#optional").val();
		var opt = parseInt(optional);
		var prgmID = $("#prgmID").val();
		
		var academic = $("#academic").val();
		var term = $("#term").val();
		var subjectID = $("#subjectID").val();
		
		var blocID = 0;
		var groupID = '';
		
		if( opt == 1 ){
			blocID = parseInt( $("#blockID").val() );
			groupID = $("#groupID").val();
			
		}else{
			blocID = 0;
			groupID = '';
		}
		
		
		$('#setup_5').html('');
		$('#setup_1').html('');
		
		$(".entypo-list-add").each(function(){
			var $rows = $(this).closest(".panel-grey");
			var panel_titles = $rows.find(".panel-body");
			panel_titles.hide();
		});
			
			var str = $(this).closest(".tables").attr('id');
			var rs = str.split("_");
			var tableID = rs[1];
			var assID = $('#Ass_in_grade_id2').val();
	
		
		var tableTitle= $(this).closest('table').attr('title');
		var pending_marks = 0;
		$('#setup_1').html('');
		$.ajax({ 
		type: "POST",
		url: "<?=site_url().'/ajax/station_process/thirdLevel';?>",
		cache: false,
		data: {ID:actualID,grdID:grdID,sectionID:sectionID,tableTitle:tableTitle,assID:tableID,blocID:blocID,groupID:groupID,prgmID:prgmID,pending_marks:pending_marks,opt:opt,academic:academic,term:term,subjectID:subjectID },
		dataType : "text",
		success: function( res2 ){
			
			
			$('#setup_5').show();
			$('#setup_5').html(res2);
			$('#setup_2').hide();
			
		},
		complete:function( res ){
			
			$(".content-wrapper").css( "min-height", "0" );
		},
		});
	
	}
);




$(document).on("click", ".edit_students_panding", 
	function(){
		var ID = $(this).prop("id");
		var nID = ID.split("_");
		var actualID = parseInt(nID[1]);
		
		var sectionID = $("#sectionID").val();
		var grdID = $("#gradeID").val();
		var optional = $("#optional").val();
		var opt = parseInt(optional);
		var prgmID = $("#prgmID").val();
		
		var blocID = 0;
		if( opt == 1 ){
			blocID = parseInt( $("#blockID").val() );
		}else{
			blocID = 0;
		}
		$('#setup_5').html('');
		$('#setup_1').html('');
		
		$(".entypo-list-add").each(function(){
			var $rows = $(this).closest(".panel-grey");
			var panel_titles = $rows.find(".panel-body");
			panel_titles.hide();
		});
			
			var str = $(this).closest(".tables").attr('id');
			var rs = str.split("_");
			var tableID = rs[1];
			var assID = $('#Ass_in_grade_id2').val();
	
		
		var tableTitle= $(this).closest('table').attr('title');
		
		var pending_marks = 1;
	
		$('#setup_1').html('');
		$.ajax({ 
		type: "POST",
		url: "<?=site_url().'/ajax/station_process/thirdLevel';?>",
		cache: false,
		data: {ID:actualID,grdID:grdID,sectionID:sectionID,tableTitle:tableTitle,assID:tableID,blocID:blocID,prgmID:prgmID,pending_marks:pending_marks },
		dataType : "text",
		success: function( res2 ){
			
			
			$('#setup_5').show();
			$('#setup_5').html(res2);
			$('#setup_2').hide();
			
		},
		complete:function( res ){
			
			$(".content-wrapper").css( "min-height", "0" );
		},
		});
	
	}
);


$.fn.digits = function(){ 
    return this.each(function(){ 
        $(this).text( $(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") ); 
    })
}

$(document).on("keyup",".marks",function(e){
	
	var obtainMarks = $(this).val();
	var max_marks = $("#total_marks").val();
	var pending_marks = $("#pending_marks").val();
	var $row = $(this).closest("tr");
	var invalid = $row.find(".invalid");
	var invalid2 = $row.find(".invalid2");
	var mObtained = $row.find(".OtainMarks");
	var mObtn = mObtained.val();
	var txt = obtainMarks;
	if( e.keyCode !=  32 ){
	var obtainMarks2 = '';
	var eventKeyCode =0;
	
	
	setTimeout(function(){
		 var eventKeyCode =0;
	    eventKeyCode = window.e ? e.keyCode : e.which; // what I already tried is in StackOverflow answer    
    		}, 100);
	if( e.keyCode == 8 ){
	}else{
		if ( txt.indexOf(".") > -1 ) {
			var substr = txt.split(".")[1].substring(0, 2);
			$(this).val( txt.split(".")[0] + "." + "5");	
		}else{
			obtainMarks2 = obtainMarks;
		} 	
	} 
	
	
	
    var text = $row.find(".geometry").data("id");
	var pencil = $row.find(".fa-pencil-square-o");
	var loadingIcon = $row.find(".fa-refresh");
	var faCheck = $row.find(".fa-check");
	var triangle = $row.find(".fa-exclamation-triangle");
	var fa = $row.find(".fa");
	var invalid = $row.find(".invalid");
	var invalid3 = $row.find(".invalid3");
	var student_id = parseInt( text );
	var user_ip = $("#user_ip").val();
	var user_agent = $("#user_agent").val();
	var user_id = $("#user_id2").val();
	var $ables = $(this).closest(".tables");
	var detail_id = $ables.find(".detail_id").val();
	var self = $(this);
	var flag;
	flag = false;
	$(this).val($(this).val().replace(/[^0-9\.]/g,''));
	if ((e.eventKeyCode != 46 || $(this).val().indexOf('.') != -1) && (e.eventKeyCode < 48 || e.eventKeyCode > 57)) {
		e.preventDefault();
	}else{}
	var obtainMarks4 = $(this).val();	
	if (!$.isNumeric(obtainMarks4) && (e.eventKeyCode == 9) ) {
		flag = false;  
	}else{
		flag = true;  	
	}

if (flag){
invalid.hide();
	if( e.keyCode != 9 &&  e.keyCode != 16){
		setTimeout(function(){ 
		pencil.hide();
		faCheck.hide();
		loadingIcon.show();
		if( obtainMarks4 != ''){
			if( parseFloat( obtainMarks4 ) <= parseFloat(max_marks)  ){
				triangle.hide();
				invalid2.hide();
				sendAjax(detail_id,user_ip,user_agent,obtainMarks4,student_id,user_id,pending_marks,mObtn );
			}else{
				sendAjax2(detail_id,user_ip,user_agent,obtainMarks4,student_id,user_id,pending_marks,mObtn );
				pencil.hide();
				faCheck.hide();
				loadingIcon.hide();
				triangle.show();
				invalid2.show();
				invalid3.hide();
			}
		}else{
			triangle.hide();
			invalid2.hide();
		}
		
	}, 2000);
	}
}else{  fa.hide(); invalid.show();  }
function sendAjax( detail_id,user_ip,user_agent,obtainMarks4,student_id,user_id,pending_marks,mObtn ){
if( obtainMarks4 != ''  ){
 $.ajax({
		type: "POST",
		url: "<?=site_url().'/etab/ajax/studentMarks';?>",
		cache: false,
		data:{detail_id:detail_id,user_ip:user_ip,user_agent:user_agent,obtainMarks:obtainMarks4,student_id:student_id,user_id:user_id,pending_marks:pending_marks,mObtn:mObtn},
		dataType:"TEXT",
		beforeSend: function(){},
		success: function(html){
		var rtrn = parseInt( html );
			if(rtrn == 1){
				invalid3.show();
			}else{
				invalid3.hide();
			}
		},
		complete: function(){
			loadingIcon.hide();
			faCheck.show();
		},
		error: function(){
			faCheck.hide();
			triangle.show();
		}
	}); 
 }
} // end function sendAjax
} // End keyCode != 32	
});


$(document).on("click",".asesmntRprt",function(){
	
var user_id = $("#user_id").val();
var role_id = $("#role_id").val();
var sectionID = $("#sectionID").val();
var gradeID = $("#gradeID").val();
var optional = $("#optional").val();
//var GPID = $("#GPID").val();
var prgmID = $("#prgmID").val();
var gpp_id = $("#gpp_id").val();
var academic = $("#academic").val();
var term = $("#term").val();
var subjectID = $("#subjectID").val();


var groupID = $("#groupID").val();
var blockID = $("#blockID").val();



	if( ( user_id != '' && user_id >  0 ) && ( term != '' && term > 0 ) && ( gradeID != '' && gradeID > 0 ) && (subjectID!='' && subjectID>0) && (academic != '' && academic>0) ){
		
		$("#setup_2").hide();
        $.ajax({
            type: "POST",
            cache: false,
            url: "<?=site_url().'/ajax/station_process/programmeAsesmntList';?>",
            data: {user_id:user_id,role_id:role_id,sectionID:sectionID,optional:optional,prgmID:prgmID,gpp_id:gpp_id,academic:academic,term:term,subjectID:subjectID, gradeID:gradeID},
            dataType: "HTML",
            beforeSend: function(){
              $('#cssload-container').show();
            },
            success: function(res){
                $("#setup_1").show();
                $('#cssload-container').hide();
                $("#setup_1").html(res);                
            },
        });
	}
	
	
	
});



$(document).on("click",".asesmntRprt_pdf",function(){
    
var user_id = $("#user_id").val();
var role_id = $("#role_id").val();
var sectionID = $("#sectionID").val();
var gradeID = $("#gradeID").val();
var optional = $("#optional").val();
//var GPID = $("#GPID").val();
var prgmID = $("#prgmID").val();
var gpp_id = $("#gpp_id").val();
var academic = $("#academic").val();
var term = $("#term").val();
var subjectID = $("#subjectID").val();


var groupID = $("#groupID").val();
var blockID = $("#blockID").val();



    if( ( user_id != '' && user_id >  0 ) && ( term != '' && term > 0 ) && ( gradeID != '' && gradeID > 0 ) && (subjectID!='' && subjectID>0) && (academic != '' && academic>0) ){


      
        var pdf_url = "<?php echo site_url().'/ajax/station_process/show_Assessment_Report_PDF?user_id='; ?>"+user_id+'&role_id='+role_id+
          '&sectionID='+sectionID+
          '&gradeID='+gradeID+
          '&optional='+optional+
          '&prgmID='+prgmID+
          '&gpp_id='+gpp_id+
          '&academic='+academic+
          '&term='+term+
          '&subjectID='+subjectID+
          '&groupID='+groupID+
          '&blockID='+blockID
        ;




        //pdf_url =  encodeURIComponent(pdf_url);
        //var href = "<?php echo base_url() . 'omponents/pdfjs/web/viewer.html?file=';?>"+pdf_url;
        //window.open(href, '_blank');
        
        
        window.open(pdf_url, '_blank');
    }
    
    
    
});





//summativetRprt


$(document).on("click",".summativetRprt",function(){
	
var user_id = $("#user_id").val();
var role_id = $("#role_id").val();
var sectionID = $("#sectionID").val();
var gradeID = $("#gradeID").val();
var optional = $("#optional").val();
//var GPID = $("#GPID").val();
var prgmID = $("#prgmID").val();
var gpp_id = $("#gpp_id").val();
var academic = $("#academic").val();
var term = $("#term").val();
var subjectID = $("#subjectID").val();


var groupID = $("#groupID").val();
var blockID = $("#blockID").val();



	if( ( user_id != '' && user_id >  0 ) && ( term != '' && term > 0 ) && ( gradeID != '' && gradeID > 0 ) && (subjectID!='' && subjectID>0) && (academic != '' && academic>0) ){
		
		$("#setup_2").hide();
        $.ajax({
            type: "POST",
            cache: false,
            url: "<?=site_url().'/ajax/station_process/getSummativeInfo';?>",
            data: {user_id:user_id,role_id:role_id,sectionID:sectionID,optional:optional,prgmID:prgmID,gpp_id:gpp_id,academic:academic,term:term,subjectID:subjectID, gradeID:gradeID},
            dataType: "HTML",
            beforeSend: function(){
              $('#cssload-container').show();
            },
            success: function(res){
                $("#setup_1").show();
                $('#cssload-container').hide();
                $("#setup_1").html(res);                
            },
        });
	}
	
});





$(document).on("click",".summativeRprtPDF",function(){
    
var user_id = $("#user_id").val();
var role_id = $("#role_id").val();
var sectionID = $("#sectionID").val();
var gradeID = $("#gradeID").val();
var optional = $("#optional").val();
//var GPID = $("#GPID").val();
var prgmID = $("#prgmID").val();
var gpp_id = $("#gpp_id").val();
var academic = $("#academic").val();
var term = $("#term").val();
var subjectID = $("#subjectID").val();


var groupID = $("#groupID").val();
var blockID = $("#blockID").val();



    if( ( user_id != '' && user_id >  0 ) && ( term != '' && term > 0 ) && ( gradeID != '' && gradeID > 0 ) && (subjectID!='' && subjectID>0) && (academic != '' && academic>0) ){


      
        var pdf_url = "<?php echo site_url().'/ajax/station_process/CreateReportPDF?user_id='; ?>"+user_id+'&role_id='+role_id+
          '&sectionID='+sectionID+
          '&gradeID='+gradeID+
          '&optional='+optional+
          '&prgmID='+prgmID+
          '&gpp_id='+gpp_id+
          '&academic='+academic+
          '&term='+term+
          '&subjectID='+subjectID+
          '&groupID='+groupID+
          '&blockID='+blockID
        ;

        window.open(pdf_url, '_blank');
    }
    
    
    
});

  $(document).on("click",".SubjectRPTPDF",function(){
   var user_id = $("#user_id").val();
   var role_id = $("#role_id").val();
   var sectionID = $("#sectionID").val();
   var gradeID = $("#gradeID").val();
   var optional = $("#optional").val();
//var GPID = $("#GPID").val();
  var prgmID = $("#prgmID").val();
  var gpp_id = $("#gpp_id").val();
  var academic = $("#academic").val();
  var term = $("#term").val();
  var subjectID = $("#subjectID").val();


  var groupID = $("#groupID").val();
  var blockID = $("#blockID").val();



  if( ( user_id != '' && user_id >  0 ) && ( term != '' && term > 0 ) && ( gradeID != '' && gradeID > 0 ) && (subjectID!='' && subjectID>0) && (academic != '' && academic>0) ){


    
      var pdf_url = "<?php echo base_url().'index.php/etab_reports/get_subject_report_ajax/GetSubjectReport?user_id='; ?>"+user_id+'&role_id='+role_id+
        '&sectionID='+sectionID+
        '&gradeID='+gradeID+
        '&optional='+optional+
        '&prgmID='+prgmID+
        '&gpp_id='+gpp_id+
        '&academic='+academic+
        '&term='+term+
        '&subjectID='+subjectID+
        '&groupID='+groupID+
        '&blockID='+blockID
      ;

      window.open(pdf_url, '_blank');
  }

});



$(document).on("change", ".radioAction", function(){
	
	var $row = $(this).closest(".radioActionTD");
	var innerAction1 = $row.find(".innerAction1");
	var innerAction2 = $row.find(".innerAction2");
	innerAction1.hide();
	innerAction2.show();
	
	
});



$(document).on("click", ".innerAction3", function(){
	
	var $row = $(this).closest(".radioActionTD");
	var $TRow = $(this).closest("tr");
	
	var innerAction1 = $row.find(".innerAction1");
	var innerAction2 = $row.find(".innerAction2");
	var innerAction4 = $row.find(".innerAction4");
	var innerAction5 = $row.find(".innerAction5");
	var innerAction6 = $row.find(".innerAction6");
	
	
	var thisID = $(this).attr("id");
	
	var detailedID = $row.find(".detailedID").val();
	var myRadio = $row.find(".radioAction"); // get selected radio button value
	
	var checkedValue = myRadio.filter(':checked').val(); // 0 means igore 1 means Accomplish
	// if 0 check ignore
	var radio_inline_ = "radio_inline_"+detailedID;
	
	var actionToForm = 0;
	
	
	
	if( thisID == 'submitConfirmFail'){
		innerAction2.hide();
		innerAction1.show();
		if( checkedValue == 0) {
			//console.log(1);
			$('input:radio[name="'+radio_inline_+'"][value="1"]').prop('checked',true);
			$TRow.removeClass("danger");
		}else{
			//console.log(2);
			$('input:radio[name="'+radio_inline_+'"][value="0"]').prop('checked',true);
			$TRow.addClass("danger");
		}
	
		
	}else{
		innerAction2.hide();
		innerAction1.show();
		
		if( checkedValue == 0) {
			//console.log(3);
			$TRow.addClass("danger");
			actionToForm = 3; // 3 means Accomplish to ignore if three database collumn ignore will be updated to 1
			
		}else{
			//console.log(4);
			$TRow.removeClass("danger");
			actionToForm = 4; // 4 means Ignore To Accomplish
		}
		
		
		if( parseInt( detailedID ) > 0 ){
			innerAction4.slideDown("slow");

  setTimeout(function(){
			$.ajax({
				type:"POST",
				cache:false,
				 url: "<?=site_url().'/ajax/station_process/ignoreAccomplish';?>",
				data:{ detailedID:detailedID,actionToForm:actionToForm},
				dataType:"JSON",
				beforeSend: function(){
				  
				},
				success:function(res){
					
					
					
					if(res.res == 1 ){
						innerAction4.slideUp( "slow");
						innerAction5.slideDown("slow");	
					}else{
						innerAction4.slideUp( "slow");
						innerAction6.slideDown("slow");	
					}
					
				},
				complete:function(){
					setTimeout(function() {
						innerAction5.slideUp( "slow");
					}, 3000)
				},
				error: function(){
					innerAction4.slideUp( "slow");
					innerAction6.slideDown("slow");	
				}
			});
			}, 3000);
		}
		
	}
	
});





function sendAjax2( detail_id,user_ip,user_agent,obtainMarks4,student_id,user_id,pending_marks,mObtn ){
if( obtainMarks4 != ''  ){
 $.ajax({
		type: "POST",
		url: "<?=site_url().'/etab/ajax/studentMarks2';?>",
		cache: false,
		data:{detail_id:detail_id,user_ip:user_ip,user_agent:user_agent,obtainMarks:obtainMarks4,student_id:student_id,user_id:user_id,pending_marks:pending_marks,mObtn:mObtn},
		dataType:"TEXT",
		beforeSend: function(){},
		success: function(html){
		var rtrn = parseInt( html );
			if(rtrn == 1){
				invalid3.show();
			}else{
				invalid3.hide();
			}
		},
		complete: function(){
			loadingIcon.hide();
			faCheck.show();
		},
		error: function(){
			faCheck.hide();
			triangle.show();
		}
	}); 
 }
	
}
//});
</script>
<!--/Scripts-->
</body>
</html>